<div class="home-container">
    <section class="filters-section mb-5">
        <div class="row g-4">
            <div class="col-md-6 filter-group d-flex flex-column gap-2">
                <label for="catalog-select" class="small fw-bold text-uppercase tracking-wider">Select Catalog</label>
                <ng-select name="catalog" [items]="catalogDropdown()" bindLabel="name" bindValue="id"
                    [searchable]="true" [loading]="catalogDropdownLoading()" placeholder="Choose a category"
                    (search)="catalogSearchQuery.set($event.term)" [ngModel]="selectedCatalog()"
                    (ngModelChange)="selectedCatalog.set($event)">
                </ng-select>
            </div>

            <div class="col-md-6 search-group d-flex flex-column gap-2">
                <label for="search-input" class="small fw-bold text-uppercase tracking-wider">Search Books</label>
                <div class="search-box position-relative">
                    <input id="search-input" type="text" placeholder="Search by Title or Author..." autocomplete="off"
                        [value]="bookSearchQuery()" (input)="bookSearchQuery.set($any($event.target).value)"
                        class="form-control ps-5 border-0 rounded-3">
                    <span
                        class="position-absolute start-0 top-50 translate-middle-y ms-3 opacity-50 material-symbols-outlined">
                        search
                    </span>
                </div>
            </div>
        </div>
    </section>

    <section class="books-display">
        <h3 class="section-title h5 fw-bold ">Discovery Library</h3>
        <div class="scrollable-books-container pe-3">
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-4">
                @for (book of books(); track book.id) {
                <div class="col">
                    <div
                        class="book-card position-relative p-4 my-4 mx-2 d-flex flex-column rounded-3 overflow-hidden border">
                        <div class="book-spine position-absolute start-0 top-0 bottom-0 transition-all"></div>

                        <!-- Centered Title Section -->
                        <div class="flex-grow-1 d-flex align-items-center justify-content-center text-center px-2">
                            <h5 class="fw-bold mb-0 text-white book-title">{{ book.title }}</h5>
                        </div>

                        <!-- Bottom Info Section -->
                        <div class="position-relative z-1 mt-auto">
                            <p class="mb-0 small text-white-50 fw-medium author-name">{{ book.author_name }}</p>
                            <span class="year-info text-white-50 opacity-75 fw-bold">{{ book.year }}</span>
                        </div>
                    </div>
                </div>
                } @empty {
                <div class="col-12 text-center py-5 w-100">
                    @if (error()) {
                    <p class="text-danger fst-italic">{{ error() }}</p>
                    } @else {
                    <p class="text-danger fst-italic">No books found matching your criteria.</p>
                    }
                </div>
                }
            </div>
        </div>
    </section>
</div>